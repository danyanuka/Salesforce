<template>
  <lightning-card title="Edit Account Info">
    <div class="record-form-container">
      <lightning-record-edit-form
        object-api-name={accountApiName}
        record-id={recordId}
        class="custom-record-form"
      >
        <lightning-input-field field-name={phoneField}> </lightning-input-field>
        <lightning-input-field field-name={typeField}> </lightning-input-field>
        <lightning-input-field field-name={descriptionField}>
        </lightning-input-field>

        <h3
          class="slds-text-heading_small slds-m-bottom_medium slds-text-title_bold"
        >
          Associate a contact with that Account
        </h3>

        <table class="slds-table slds-table_bordered slds-table_fixed-layout">
          <thead>
            <tr class="slds-text-title_caps">
              <th scope="col">Contact Name</th>
              <th scope="col">Email</th>
              <th scope="col">Mobile</th>
              <th class="slds-cell-shrink slds-text-align_right" scope="col">
                <lightning-icon
                  icon-name="utility:check"
                  size="small"
                  alternative-text="Select All/Deselect All"
                ></lightning-icon>
              </th>
            </tr>
          </thead>
          <tbody>
            <template for:each={unassociatedContacts} for:item="contact">
              <tr key={contact.Id} class="slds-hint-parent">
                <td class="slds-truncate" data-label="Contact Name">
                  {contact.Name}
                </td>
                <td class="slds-truncate" data-label="Contact Email">
                  {contact.Email}
                </td>
                <td class="slds-truncate" data-label="Contact Phone">
                  {contact.MobilePhone}
                </td>
                <td class="slds-cell-shrink slds-text-align_right">
                  <lightning-input
                    type="checkbox"
                    name="contactSelection"
                    data-value={contact.Id}
                    onchange={handleContactSelection}
                  >
                  </lightning-input>
                </td>
              </tr>
            </template>
          </tbody>
        </table>
        <div class="slds-var-m-top_medium">
          <lightning-button
            onclick={handleContactAssociation}
            variant="brand"
            type="submit"
            label="Submit"
          >
          </lightning-button>
        </div>
      </lightning-record-edit-form>
    </div>
  </lightning-card>
</template>
